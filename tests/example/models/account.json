{
  "model" : {
    "name"      : "Account",
    "crud"      : true,
    "validator" : "account",
    "properties" : {
      "firstname" : {
        "required" : true,
        "type" : "String"
      },
      "lastname" : {
        "required" : true,
        "type" : "String"
      },
      "birth_date" : {
        "required" : true,
        "type" : "String"
      },
      "family_status" : "String",
      "civility": {
        "required" : true,
        "type" : "String"
      },
      "job_category" : "String",
      "dependent_person" : "Number",
      "childrens" : {
        "required" : false,
        "type" : [
          {
            "firstname" : "String",
            "lastname" : "String",
            "birth_date": {
              "required" : true,
              "type" : "Date"
            },
            "sex" :  {
              "required" : true,
              "type" : "String"
            }
          }
        ]
      },
      "commercial_optin" : {
        "required" : true,
        "type" : [
          {
            "commercial_optin_type" : {
              "required" : true,
              "type" : "String"
            },
            "call" : {
              "required" : true,
              "type" : "Boolean"
            },
            "sms" : {
              "required" : true,
              "type" : "Boolean"
            },
            "email" : {
              "required" : true,
              "type" : "Boolean"
            },
            "store_choices" : [ "String" ],
            "franchise" : "Boolean"
          }
        ]
      },
      "home_id" : {
        "required" : true,
        "type" : "String"
      },
      "emails" : {
        "required" : true,
        "type" : [
          {
            "address" : {
              "type" : "String",
              "required" : "true"
            },
            "validated_date" : "Date",
            "token" : {
              "required" : true,
              "type" : "String"
            },
            "token_lost" : "Boolean",
            "primary" : {
              "required" : true,
              "type" : "Boolean"
            }
          }
        ]
      },
      "phones" : {
        "required" : "true",
        "type" : [
          {
            "prefix" : {
              "required" : true,
              "type" : "String"
            },
            "number" : {
              "required" : true,
              "type" : "Number"
            },
            "validation_type" : {
              "required" : true,
              "type" : "String"
            },
            "validated_date" : "Date",
            "primary" : {
              "required" : true,
              "type" : "Boolean"
            },
            "phone_type" : {
              "required" : true,
              "type" : "String"
            },
            "sub_type" : {
              "required" : true,
              "type" :"String"
            },
            "token_lost" : "String",
            "codes" : {
              "required" : true,
              "type" : [
                {
                  "codes"  : {
                    "required" : true,
                    "type" : "String"
                  },
                  "validated_date" : "Date",
                  "retry" : {
                    "required" : true,
                    "type" : "Number"
                  }
                }
              ]
            }
          }
        ]
      },
      "sync"  : {
        "required" : true,
        "type" : {
          "to_vindemia" : {
            "required" : true,
            "type" : "Boolean"
          },
          "from_vindemia"  : {
            "required" : true,
            "type" :"Boolean"
          }
        }
      },
      "auths"  : {
        "required" : true,
        "type" : [
          {
            "auth_type" : {
              "required" : true,
              "type" : "String"
            },
            "email ": {
              "required" : true,
              "type" : "String"
            },
            "password" : "String",
            "social_profile" : {
              "required" : true,
              "type" : {
                "display_name" : {
                  "required" : true,
                  "type" : "String"
                },
                "lastname": {
                  "required" : true,
                  "type" : "String"
                },
                "sex" : {
                  "required" : true,
                  "type" : "String"
                },
                "provider_id" : {
                  "required" : true,
                  "type" : "String"
                },
                "profile_picture" : "String",
                "access_token": {
                  "required" : true,
                  "type" : "String"
                }
              }
            }
          }
        ]
      },
      "notification_preference": {
        "required" : true,
        "type" : ["String"]
      },
      "profiles" : {
        "required" : true,
        "type" : ["ObjectID"]
      },
      "iso_code" : {
        "required" : true,
        "type" : "String"
      },
      "created_date" : {
        "type" : "Date",
        "required" : true
      },
      "updated_date" : {
        "type" : "Date",
        "required" : true
      },
      "deleted_date" : "Date"
    }
  },
  "apidoc" : {
    "methods" : [
      {
        "apiVersion"    : "0.1.0",
        "type"          : "get",
        "title"         : "GET User(s)",
        "path"          : "/user/:user_id",
        "apiPermission"  : "admin",
        "addDefaultParamFromModel" : false,
        "methodDescription" : "Method to retrieve one or all user, if you want get one user you should specify his id, otherwise the whole users are returned",
        "specificParam" : [
          {
            "name"  : "user_id",
            "type"  : "Object_id"
          }
        ],
        "apiSuccessExample" : {
          "name"    : "Success-Response",
          "addDefaultParamFromModel" : true,
          "example" : {
            "header"  : "HTTP/1.1 200 OK"
          }
        },
        "apiErrorExample" : "notFound"
      },
      {
        "apiVersion" : "0.1.0",
        "type"      : "post",
        "path"      : "/user/",
        "methodDescription" : "Method to add a new user in database",
        "title"         : "POST one User",
        "apiPermission"  : "admin",
        "specificParam" : [],
        "apiSuccessExample" : "success",
        "apiErrorExample" : "notFound"
      }
    ]
  }
}
